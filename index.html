<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Buscador de Preguntas Linux - Respuesta Ãšnica</title>
  <style>
    body { font-family: Arial, Helvetica, sans-serif; background:#f6f8fa; margin:0; padding:20px; color:#111; }
    .container { max-width:900px; margin:24px auto; background:#fff; padding:24px; border-radius:8px; box-shadow:0 4px 14px rgba(0,0,0,0.08); }
    h1 { margin-top:0; }
    .controls { display:flex; gap:8px; align-items:center; margin-bottom:12px; }
    input[type="text"] { flex:1; padding:10px 12px; font-size:16px; border:1px solid #ccd; border-radius:6px; }
    button { padding:10px 14px; font-size:15px; border-radius:6px; border:0; cursor:pointer; background:#0366d6; color:#fff; }
    button.secondary { background:#6a737d; }
    .result { margin-top:16px; padding:14px; border-radius:6px; background:#f1f8ff; border:1px solid #dbeeff; }
    .hint { font-size:13px; color:#555; margin-top:8px; }
    .score { font-size:12px; color:#333; opacity:0.7; margin-top:6px; }
    .no-speech { color:#b03a2e; }
    footer { margin-top:18px; font-size:13px; color:#666; }
    .mic { display:inline-flex; align-items:center; gap:8px; }
  </style>
</head>
<body>
  <div class="container">
    <h1>Buscador de Preguntas Linux â€” Respuesta Ãºnica</h1>
    <p>Escribe o presiona el micrÃ³fono para preguntar (respuestas Ãºnicas y verdaderas segÃºn la base incluida).</p>

    <div class="controls">
      <input id="query" type="text" placeholder="Escribe tu pregunta (por ejemplo: 'Â¿CuÃ¡l es el comando para copiar un archivo?')" />
      <button id="btnSearch">Buscar</button>
      <button id="btnMic" class="secondary">ðŸŽ¤ Usar voz</button>
    </div>

    <div id="result" class="result" aria-live="polite">Ingresa una pregunta o usa la voz y pulsa Buscar.</div>
    <div id="score" class="score"></div>
    <div id="hint" class="hint">El buscador hace coincidencia por palabras y devuelve una sola respuesta considerada correcta.</div>

    <footer>
      Puedes usar esto como pÃ¡gina estÃ¡tica en GitHub Pages (sube index.html a la rama gh-pages o a main/docs). TambiÃ©n incluyo un ejemplo en C# (API) en README si prefieres backend.
    </footer>
  </div>

  <script>
    // Base de datos de preguntas y respuestas (cada pregunta tiene una Ãºnica respuesta "verdadera")
    const QA = [
      { q: "Â¿CuÃ¡l es la diferencia entre ls, ls -l y ls -a?", a: "ls lista archivos, ls -l muestra detalles y ls -a incluye archivos ocultos." },
      { q: "Â¿Para quÃ© sirve el comando pwd?", a: "Muestra la ruta del directorio actual." },

      { q: "Â¿cual es el demonio que gestiona los servicios de Linux?", a: "systemd" },
      { q: "Â¿Cual es el comando utilizado para mostrar el directorio de trabajo actual en la terminal de Linux?", a: "pwd" },
      { q: "Â¿cual es el comando utilizado para enumerar los archivos en un directorio en Linux?", a: "ls" },
      { q: "Â¿CuÃ¡l es el comando para mostrar informaciÃ³n de uso de memoria en Linux?", a: "free" },
      { q: "Â¿cual es el comando para iniciar un servicio en Linux usando systemd?", a: "systemctl start <nombre-del-servicio>" },
      { q: "Â¿cual es el comando para enumerar todos los grupos en Linux?", a: "cat /etc/group" },
      { q: "Â¿cual es el comando para detener un servicio en Linux usando systemd?", a: "systemctl stop <nombre-del-servicio>" },
      { q: "Â¿Cual es el demonio responsable de montar dispositivos automÃ¡ticamente en Linux?", a: "autofs" },
      { q: "Â¿cual es la base de la filosofÃ­a del software libre de Linux?", a: "Compartir y colaborar" },
      { q: "Cual es el comando para mover un archivo a otro directorio en Linux?", a: "mv" },
      { q: "Â¿cual es el archivo que contiene la configuraciÃ³n de resoluciÃ³n de pantalla en Linux?", a: "/etc/X11/xorg.conf" },
      { q: "Â¿cual es el archivo que almacena las contraseÃ±as de los usuarios en Linux?", a: "/etc/shadow" },
      { q: "Â¿cual es el comando para copiar un archivo en Linux?", a: "cp" },
      { q: "Â¿cual es el archivo que contiene la configuraciÃ³n del entorno global para todos los usuarios?", a: "/etc/profile" },
      { q: "Â¿cual es el comando para enumerar todos los procesos que se ejecutan en el sistema en Linux?", a: "ps" },
      { q: "Â¿Cual es el archivo o ruta que contiene informaciÃ³n sobre dispositivos de hardware en Linux?", a: "/sys/devices" },
      { q: "Â¿cual es el comando para cambiar el directorio actual a un directorio especifico en Linux?", a: "cd" },
      { q: "Â¿cual es el archivo que contiene la configuraciÃ³n de la impresora en Linux?", a: "/etc/cups" },
      { q: "Â¿cual es el archivo que contiene la configuraciÃ³n de red para systemd en Linux?", a: "No existe un archivo Ãºnico; la configuraciÃ³n de red para systemd se encuentra en /etc/systemd/network/" },
      { q: "Â¿cual es el comando para mostrar informaciÃ³n sobre dispositivos de red en Linux?", a: "ifconfig (o ip a para sistemas modernos)" },
      { q: "Â¿cual es el comando para eliminar un archivo en Linux?", a: "rm" },
      { q: "Â¿cual es la utilidad que se utiliza para comprimir archivos en formato .tar.gz en Linux?", a: "tar" },
      { q: "Â¿cual es el comando para iniciar un programa en Linux desde la terminal?", a: "Escribir el nombre del programa" },
      { q: "Â¿cual es el comando que se utiliza para cambiar los permisos de un archivo en Linux?", a: "chmod" },
      { q: "Â¿cual es el archivo que contiene la informaciÃ³n sobre los paquetes instalados en Linux (en sistemas basados en debian)?", a: "/var/lib/dpkg/status" },
      { q: "Â¿cual es el comando para formatear una particiÃ³n en Linux?", a: "mkfs" },
      { q: "Â¿cual es el comando para crear un nuevo directorio en Linux?", a: "mkdir" },
      { q: "Â¿cual es el comando que se utiliza para cambiar la contraseÃ±a de un usuario en Linux?", a: "passwd" },
      { q: "Â¿cual es el comando para montar una particiÃ³n en Linux?", a: "mount" },
      { q: "Â¿cual es el comando para cambiar el grupo de un archivo en Linux?", a: "chgrp" },
      { q: "Â¿cual es el comando para mostrar informaciÃ³n de configuraciÃ³n de red en Linux?", a: "ifconfig (o ip a)" },
      { q: "Â¿cual es el comando para matar un proceso especifico en Linux?", a: "kill <PID>" },
      { q: "Â¿cual es el comando para cambiar el nombre de un archivo en Linux?", a: "mv" },
      { q: "Â¿cuÃ¡l es el comando que se utiliza para mostrar informaciÃ³n sobre las particiones del sistema en Linux?", a: "lsblk" },
      { q: "Â¿cuÃ¡l es el comando para enumerar todos los archivos en un directorio y sus subcarpetas en Linux?", a: "ls -R" },
      { q: "Â¿cuÃ¡l es el archivo que contiene configuraciÃ³n de hosts en Linux?", a: "/etc/hosts" },
      { q: "Â¿cuÃ¡l es el comando para enumerar todos los paquetes instalados en Linux (usando dpkg)?", a: "dpkg -l" },
      { q: "Â¿cÃ³mo se obtiene la informaciÃ³n de configuraciÃ³n de hardware en Linux?", a: "Ejecutando el comando lshw" },
      { q: "Â¿cuÃ¡l es el archivo que almacena los permisos de un directorio en Linux?", a: "No existe un archivo especÃ­fico; los permisos se almacenan en el sistema de archivos" },
      { q: "Â¿cuÃ¡l es el comando para cambiar el propietario de un archivo en Linux?", a: "chown" },
      { q: "Â¿cuÃ¡l es el comando para instalar un paquete de Linux usando el sistema de administraciÃ³n de paquetes dpkg?", a: "dpkg -i <paquete.deb>" },
      { q: "Â¿cuÃ¡l es el comando para enumerar los paquetes instalados en una distribuciÃ³n de Linux?", a: "dpkg -l (en Debian/Ubuntu)" },
      { q: "Â¿cuÃ¡l es el comando para agregar un usuario a un grupo de Linux?", a: "usermod -aG <grupo> <usuario>" },
      { q: "Â¿cuÃ¡l es el comando para mostrar informaciÃ³n sobre la utilizaciÃ³n de la CPU en Linux?", a: "top" },
      { q: "Â¿cuÃ¡l es el comando para otorgar permisos de escritura, lectura y ejecuciÃ³n a un archivo en Linux?", a: "chmod 777 <archivo>" },
      { q: "Â¿CuÃ¡l es el comando utilizado para crear un nuevo usuario en Linux?", a: "adduser" },

      // SecciÃ³n de preguntas frecuentes / explicaciÃ³n:
      { q: "Â¿CÃ³mo copiar, mover y eliminar archivos con cp, mv y rm?", a: "cp copia, mv mueve o renombra y rm elimina archivos." },
      { q: "Â¿QuÃ© hace chmod y cÃ³mo se usa en formato numÃ©rico?", a: "Cambia permisos usando nÃºmeros como 755 (propietario rwx, grupo rx, otros rx)." },
      { q: "Â¿Para quÃ© sirven chown y chgrp?", a: "Cambian el propietario y el grupo de un archivo." },
      { q: "Â¿QuÃ© hace el comando find?", a: "Busca archivos y directorios en el sistema." },
      { q: "Â¿Para quÃ© se utiliza grep?", a: "Busca texto dentro de archivos." },

      // AdministraciÃ³n de usuarios y grupos (resÃºmenes)
      { q: "Â¿CÃ³mo crear y eliminar usuarios en Linux?", a: "Con useradd para crear y userdel para eliminar (tambiÃ©n adduser en muchas distros)." },
      { q: "Â¿Diferencia entre usuario root y usuario estÃ¡ndar?", a: "Root tiene control total; un usuario estÃ¡ndar tiene permisos limitados." },
      { q: "Â¿QuÃ© archivo almacena la informaciÃ³n de usuarios?", a: "/etc/passwd" },
      { q: "Â¿QuÃ© es la autenticaciÃ³n y cÃ³mo funciona en Linux?", a: "Proceso de verificaciÃ³n de identidad mediante usuario y contraseÃ±a." },
      { q: "Â¿QuÃ© hace el comando sudo?", a: "Ejecuta comandos con privilegios de administrador." },

      // Permisos y seguridad
      { q: "Explique los permisos r, w, x.", a: "r = leer, w = escribir, x = ejecutar." },
      { q: "Â¿QuÃ© significa el permiso 755?", a: "Propietario todo (rwx), grupo y otros solo leer y ejecutar (r-x)." },
      { q: "Â¿QuÃ© diferencia hay entre permisos y propietarios?", a: "El propietario es el dueÃ±o; los permisos definen quÃ© puede hacer cada categorÃ­a." },
      { q: "Â¿QuÃ© es SELinux o AppArmor?", a: "Sistemas de control de acceso de seguridad." },
      { q: "Â¿CÃ³mo se protege un servidor Linux?", a: "Con permisos, firewall, actualizaciones y control de usuarios." },

      // GestiÃ³n de procesos
      { q: "Â¿QuÃ© hace el comando ps?", a: "Muestra los procesos en ejecuciÃ³n." },
      { q: "Â¿Para quÃ© sirve top o htop?", a: "Monitorean procesos en tiempo real." },
      { q: "Â¿CÃ³mo finalizar un proceso con kill?", a: "Con kill <PID>." },
      { q: "Â¿QuÃ© es un proceso zombie?", a: "Proceso terminado que aÃºn figura en la tabla de procesos hasta que el padre lo recoja." },
      { q: "Â¿Diferencia entre procesos en primer y segundo plano?", a: "Primer plano ocupa la terminal; segundo plano no." },

      // AdministraciÃ³n de paquetes
      { q: "Â¿Diferencia entre apt, dnf y yum?", a: "Son gestores de paquetes para distintas distribuciones." },
      { q: "Â¿CÃ³mo instalar, actualizar y eliminar paquetes?", a: "Con apt install, apt upgrade y apt remove (u otros segÃºn la distro)." },
      { q: "Â¿QuÃ© son los repositorios?", a: "Fuentes desde donde se descargan los programas." },
      { q: "Â¿QuÃ© es un paquete .deb y un .rpm?", a: "Formatos de instalaciÃ³n de software (.deb para Debian/Ubuntu, .rpm para Fedora/CentOS)." },

      // Arranque y servicios
      { q: "Â¿QuÃ© es el GRUB?", a: "Gestor de arranque del sistema." },
      { q: "Â¿QuÃ© es systemd?", a: "Sistema de inicio y gestiÃ³n de servicios." },
      { q: "Â¿CÃ³mo iniciar, detener y reiniciar un servicio?", a: "Con systemctl start, systemctl stop y systemctl restart." },
      { q: "Â¿CÃ³mo habilitar un servicio al inicio?", a: "Con systemctl enable." },
      { q: "Â¿QuÃ© son los archivos en /etc?", a: "Archivos de configuraciÃ³n del sistema." },

      // Redes
      { q: "Â¿CÃ³mo ver la IP del sistema?", a: "Con ip a o ifconfig." },
      { q: "Â¿QuÃ© hace ping?", a: "Verifica conectividad de red." },
      { q: "Â¿QuÃ© es DNS?", a: "Sistema que traduce nombres en direcciones IP." },
      { q: "Â¿Diferencia entre IP pÃºblica y privada?", a: "La pÃºblica es visible en Internet; la privada no." },
      { q: "Â¿QuÃ© es un firewall y cÃ³mo se configura?", a: "Sistema de seguridad que controla accesos de red (ufw o firewalld)." },

      // Sistemas de archivos y almacenamiento
      { q: "Â¿QuÃ© es un sistema de archivos?", a: "MÃ©todo para organizar datos en un disco." },
      { q: "Diferencias entre ext4, xfs y ntfs.", a: "ext4 y xfs son sistemas de archivos comunes en Linux; ntfs es tÃ­pico de Windows." },
      { q: "Â¿QuÃ© es una particiÃ³n?", a: "DivisiÃ³n lÃ³gica de un disco." },
      { q: "Â¿Para quÃ© sirve mount y umount?", a: "Conectar y desconectar sistemas de archivos." },
      { q: "Â¿QuÃ© es LVM?", a: "Gestor avanzado de volÃºmenes lÃ³gicos." },

      // VirtualizaciÃ³n y contenedores
      { q: "Â¿QuÃ© es la virtualizaciÃ³n?", a: "EjecuciÃ³n de varios sistemas en un solo hardware." },
      { q: "Diferencia entre mÃ¡quina virtual y contenedor.", a: "La VM simula hardware; el contenedor comparte el sistema operativo." },
      { q: "Â¿QuÃ© es Docker?", a: "Plataforma de contenedores." },
      { q: "Â¿QuÃ© es una imagen y un contenedor?", a: "La imagen es la plantilla; el contenedor es la instancia en ejecuciÃ³n." },

      // Backups
      { q: "Â¿QuÃ© es un backup?", a: "Copia de seguridad de la informaciÃ³n." },
      { q: "Tipos de respaldo.", a: "Completo, incremental y diferencial." },
      { q: "Â¿QuÃ© hace rsync?", a: "Sincroniza archivos entre sistemas." },
      { q: "Â¿Por quÃ© son importantes las copias de seguridad?", a: "Previenen pÃ©rdida de informaciÃ³n." },

      // Casos prÃ¡cticos
      { q: "Un usuario no tiene acceso a una carpeta.", a: "Revisar permisos y propietario." },
      { q: "El servidor no arranca.", a: "Revisar GRUB y logs del sistema." },
      { q: "Un servicio web estÃ¡ caÃ­do.", a: "Usar systemctl status y journalctl." },
      { q: "No hay espacio en disco.", a: "Ver con df -h y borrar archivos innecesarios." },

      // Tipo certificaciÃ³n y comandos varios
      { q: "Â¿QuÃ© comando muestra el espacio libre en disco?", a: "df -h" },
      { q: "Â¿DÃ³nde se almacenan los logs del sistema?", a: "/var/log" },
      { q: "Â¿QuÃ© hace el comando tar?", a: "Comprime y descomprime archivos (tar, tar.gz, etc.)." },
      { q: "Â¿QuÃ© es el kernel?", a: "NÃºcleo del sistema operativo." }
    ];

    // NormalizaciÃ³n simple (quita tildes, minuscula)
    function normalize(text) {
      return text
        .toString()
        .toLowerCase()
        .normalize("NFD").replace(/[\u0300-\u036f]/g, "") // quitar tildes
        .replace(/[^\w\s-?<>]/g, " ") // quitar signos raros
        .replace(/\s+/g, " ")
        .trim();
    }

    // Buscar mejor coincidencia por conteo de palabras compartidas y posiciones
    function findBestAnswer(query) {
      const nq = normalize(query);
      if (!nq) return { a: "No se ingresÃ³ una pregunta.", score: 0, q: "" };

      // Puntuar exact match de preguntas
      for (const item of QA) {
        if (normalize(item.q) === nq) {
          return { a: item.a, score: 1.0, q: item.q };
        }
      }

      const qWords = new Set(nq.split(" "));
      let best = null;
      for (const item of QA) {
        const itemNorm = normalize(item.q);
        const iw = itemNorm.split(" ");
        let common = 0;
        for (const w of iw) if (qWords.has(w)) common++;
        // puntuaciÃ³n: fracciÃ³n de palabras compartidas sobre pregunta objetivo
        const score = common / Math.max(1, iw.length);
        if (!best || score > best.score) {
          best = { item, score };
        }
      }

      if (!best || best.score < 0.25) {
        return { a: "No he encontrado una respuesta segura para esa pregunta. Intenta usar palabras clave (ej: 'comando copiar archivo cp').", score: best ? best.score : 0, q: "" };
      }

      return { a: best.item.a, score: best.score, q: best.item.q };
    }

    // UI hooks
    const input = document.getElementById("query");
    const btnSearch = document.getElementById("btnSearch");
    const btnMic = document.getElementById("btnMic");
    const result = document.getElementById("result");
    const scoreBox = document.getElementById("score");

    btnSearch.addEventListener("click", () => {
      doSearch(input.value);
    });
    input.addEventListener("keydown", (e) => {
      if (e.key === "Enter") doSearch(input.value);
    });

    function doSearch(text) {
      const found = findBestAnswer(text);
      result.innerHTML = "<strong>Pregunta encontrada:</strong> " + (found.q || "(sin coincidencia exacta)") + "<br><strong>Respuesta Ãºnica:</strong> " + found.a;
      scoreBox.textContent = "Confianza: " + (Math.round(found.score * 100)) + "%";
    }

    // Reconocimiento de voz (Web Speech API)
    let recognition;
    if ('webkitSpeechRecognition' in window || 'SpeechRecognition' in window) {
      const SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      recognition = new SpeechRecognition();
      recognition.lang = 'es-ES';
      recognition.interimResults = false;
      recognition.maxAlternatives = 1;

      recognition.onresult = function(event) {
        const text = event.results[0][0].transcript;
        input.value = text;
        doSearch(text);
      };
      recognition.onerror = function(event) {
        result.innerHTML = "<span class='no-speech'>Error de reconocimiento: " + event.error + "</span>";
      };
    } else {
      btnMic.disabled = true;
      btnMic.title = "Reconocimiento de voz no soportado en este navegador";
    }

    btnMic.addEventListener("click", () => {
      if (!recognition) {
        result.innerHTML = "<span class='no-speech'>Reconocimiento de voz no soportado en este navegador.</span>";
        return;
      }
      recognition.start();
      result.textContent = "Escuchando... habla ahora.";
    });

    // Pregunta de ejemplo al cargar
    // doSearch("Â¿cual es el comando para copiar un archivo en Linux?");
  </script>
</body>
</html>
